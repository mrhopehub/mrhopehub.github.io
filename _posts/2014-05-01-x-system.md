---
layout: posts
title: "x11 gtk qt gnome kde 之间的区别和联系"
---

# {{ page.title }}
转载：http://www.cnblogs.com/wangkangluo1/archive/2012/06/14/2548706.html
## <font color="blue">一,linux本身没有图形界面,linux现在的图形界面的实现只是linux下的应用程序实现的</font>
图形界面并不是linux的一部分,linux只是一个基于命令行的操作系统,linux和Xfree的关系就相当于当年的DOS和WINDOWS3.0一样,windows3.0不是独立的操作系统,它只是DOS的扩充,是DOS下的应用程序级别的系统,不是独立的操作系统,同样XFree只是linux下的一个应用程序而已.不是系统的一部分,但是X的存在可以方便用户使用电脑.WINDOWS95及以后的版本就不一样了,他们的图形界面是操作系统的一部分,图形界面在系统内核中就实现了,没有了图形界面windows就不成为windows了,但linux却不一样,没有图形界面linux还是linux,很多装linux的WEB服务器就根本不装X服务器.这也WINDOWS和linux的重要区别之一.
## <font color="blue">二,X是协议,不是具体的某个软件</font>
X是协议,就像HTTP协议,IP协议一样.因为输入设备和显示设备不是同一个设备，而且他们需要相互配合，进行画面显示，所以需要一个交互协议，建立他们直接的沟通桥梁。<br>
X协议主要有X应用程序和X服务器组成，如：我需要划个圆，X应用程序告诉X服务器在屏幕的什么地方用什么颜色画一个多大的圆,而具体的"画"的动作,比如这个圆如何生成,用什么显卡的驱动程序去指挥显卡完成等等工作是由X服务器来完成的.<br><br>
X服务器还负责捕捉键盘和鼠标的动作,假设X服务器捕捉到鼠标的左键被按下了,他就告诉X应用程序:亲爱的应用程序先生,我发现鼠标被按下了,您有什么指示吗?如果X应用程序被设计成当按下鼠标左健后再在屏幕上画一个正方形的话,X应用程序就对X服务器说:请再画一个正方形,当然他会告诉服务器在什么地方用什么颜色画多大的正方形,但不关心具体怎么画--那是服务器的事情.<br><br>
那么协议是需要具体的软件来实现的,这就是下面我要讲的:
## <font color="blue">三,X和XFree86的关系</font>
有了协议就需要具体的软件来实现这个协议.就好比我们有了交通法规就需要交警去根据法规维护交通秩序一样.Xfree86就是这样一个去根据法规实现协议的"交警".他按照X协议的规定来完成X应用程序提交的在屏幕上显示的任务.当然不仅仅是某个特定的交警才可以去维护和实现这个法规,比如还可以由交通协管员来实现交通法规,必要的时候警察也可以介入,当然前提是他们都要懂得交通法规,也就是要懂得协议.所以实现X协议的软件也并不只有XFree86,XFree86只是实现X协议的一个免费X服务器软件.商业上常用MOTIF,现在还有XORG,还有很多很小的由爱好者写的小的X服务器软件.甚至可以在WINDOWS上有X服务器运行,这样你可以在linux系统上运行一个X应用程序然后在另一台windows系统上显示.多么神奇.你可以用google找到这样的X服务器软件.只不过在LINUX上最常用的是XFree86.(现在的linux发行版都用Xorg了)顺便说一句,苹果电脑的图形界面用的也是X协议,而且被认为是做的最好的X协议图形界面,并且他对X协议的实施是做在系统内核里的,所以性能明显好很多,这就是为什么很多大型三维图形设计软件都是在苹果平台上的原因.<br><br>
为了便于理解拿HTTP协议来比较:<br><br>
协议是HTTP(hyper text transmission protocol)<br>
实现这个协议的常用服务器有:apacheIIS 等<br>
请求这些服务器传输文件的客户有:IE,MOZILLA ,NETSCAPE等.<br>
<br>
协议是X
实现这个协议的常用服务器有Xfree86,Xorg,Xnest等<br>
请求这些服务器来完成显示任务的客户:所有的X应用程序.<br><br>
只不过HTTP协议的服务器和客户端通常都在两台不同的电脑(服务器和客户机)之间来实现,所以一般人对这个比较容易理解.而X协议的服务器和客户端程序通常在同一台电脑上,因此很多用户都感到对此很难理解.既然是协议,那么肯定和平台无关的,因此可以让X应用程序显示在任何装有X服务器的远程计算机上.甚至显示在装有Xnest服务器的windows系统上.只不过在大多数情况下,X应用程序都用本机的X服务器,然后X服务器将显示结果输出到本机的显示器.这也是很多人不理解X是一种协议的原因.
## <font color="blue">四,X、X11和X11R6又是什么关系</font>
不知道初学者有没有注意到/usr/X11R6这个目录,这是XFree的默认安装目录
X11R6实际上是XProtocol version 11 Release6(X协议第11版第六次发行)的意思,就是说目前用的X协议是第11版的,然后经过了6次小的修正.不同版本的X协议是不能通信的.就象我们现在IPV4和IPV6不能通信一样,不过不用担心,现在的X服务器软件和X应用程序都遵循X11R6.<br><br>
另外XFree863.3.6 XFree86 4.3.6等这些版本是实现X协议的软件XFree86的版本号.这是初学者经常高混淆的概念.<br><br>
协议版本和实现协议的软件的版本--这两个概念的区别你分清楚了吗?
## <font color="blue">五,WM(windowmanager 窗口管理器)</font>
窗口管理器的作用就是实现窗口的最大化,最小化,移动,关闭等.而这些不是X服务器来负责完成的.如果不窗口管理器，X应用程序仍可以启动，但它就在屏幕中间,不能移动,不能最小化,不能最大化,没有边框.<br><br>
Xfree86自带了一个简单的窗口管理器：twm，同时窗口管理器还有GNOME和KDE等。为了更方便的了解窗口管理器的作用，我们可以做以下测试(因我使用的是ubuntu，无法确认以下操作和命令的正确性，请有条件的朋友测试以下并给与指正)。

1. 系统(有界面的Linux)启动后，进入图形进面，我们打开一个XTERM，输入init3就可以安全的回到字符界面.
2. 再输入#startx又返回到图形界面,你看到的是一个和平时使用一样的完整的图形界面操作环境.你可以最大化,最小化,移动,关闭窗口等.
3. 我们还是再次进入字符界面，看看吧，按ctrl+alt+backspace反回字符界面.输入:#xinit(注：与第二步的命令startx不同)，再次启动图形界面,你看到了什么,你看到一个XTERM.而且不能移动.但是你可以在这个XTERM中输入命令打开X应用程序,如果我输入:#mozilla。打开浏览器,你看到的浏览器和平时有什么不同吗?他在屏幕中间,不能移动,不能最小化,不能最大化,没有边框.<br><br>
为什么同样一个X应用程序会有这样的不同呢?因为我们用startx起动图形界面的时候同时也启动了一个默认的WM(即窗口管理器),如果你用KDE就起动了KDE,如果你用GNOME就起动了GNOME.但是你用xinit起动图形界面的时候却没有起动WM.<br><br>
现在你明白窗口管理器的作用了吗?
4. 如果你用xinit起动图形界面并在xterm中输入twm,看看会有什么?xterm被加上了一个边框,你可以通过这个边框移动,最大化,最小化这个xterm,twm就是XFree86中自带的窗口管理器,是一个比较简陋的最简单的窗口管理器,但是他具有窗口管理器的全部特征.
5. 如果你不输入twm而输入gnome-session就可以起动GNOME或者输入startkde起动KDE.

通过以上的实验你就可以清楚的明白他们之间的关系.<br><br>
另：<br>
其它的小型窗口管理器有:<br>
windowmaker,after step,blackbox,fvwm,fvwm2,等等都是常用的优秀窗口管理器.REDHAT9中有windowmaker 但是默认不安装,大家可以装来试试.只要xinit再wmaker&就可以用windowmaker了.
## <font color="blue">六、X协议的Client端由谁实现的呢</font>
XFree86是X协议的服务器软件(注以软件的形式实现)，但Client端更多的是方便程序员更方便的使用X协议与服务器端的XFree86交互，故就产生了一个Xlib库，封装了X协议内容，如果你还觉得直接使用Xlib不方便，于是就产生了qt和gtk，对Xlib进一步封装，提供了很多控件，可以可视化的使用X协议更方便程序员的开发。<br><br>
Xlib、qt、gtk直接关系如下图：<br>![image](/images/x11/xclient.jpg)<br>
QT是直接使用xlib库的，GTK并为直接使用xlib，而是使用更低层的函数库GDK和Glib。这种结构使得Gtk可以更方便地移植到其它系统上，或使用与XWindows系统无关的图形库。
## <font color="blue">七、KDE、GNOME、QT和GTK直接关系</font>
KDE和GNOME是窗口管理器，启动他们后我们进入了可视化操作(图形界面)，既然需要显示图形，自然少不了与X协议的服务器软件打交道，既然QT和GTK进一步封装了X协议，并且他们提供了更为丰富的窗口及控制机制，于是在QT基础上实现的窗口管理器叫KDE，在GTK基础上实现的窗口管理器叫GNOME.<br><br>
再次提示：KDE和GNOME并不只是窗口管理器，同时提供了桌面、菜单等等。